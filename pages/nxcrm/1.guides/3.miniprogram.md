---
title: 安装
---

### 1. 获取后端增量包

通过客服人员获取后端增量包。后端增量包将包含以下目录和文件
```
app/Providers/Filament/AdminPanelProvider.php
plugins/MiniProgram
bootstrap/cache/modules.php
modules_statuses.json
```

拿到增量包以后，直接解压覆盖在CRM根目录。

执行以下命令：

```
composer dump-autoload
composer update
php artisan filament:optimize-clear
```

接下来，在后台的管理面板(右上角点击管理)，看看左侧有没有出现插件菜单，如果出现，点进去，启用插件。

### 启用插件

在后台管理面板中，点击插件管理，在微信小程序插件下面，点绿色对勾小图标，启用插件，直到图标变成红色小叉，表示插件启用成功。


#### 修改.env文件

在项目目录，找到这几个参数，完善这几个参数
```
WECHAT_MINI_APP_APPID=
WECHAT_MINI_APP_SECRET=  
WECHAT_MINI_APP_TOKEN=  
WECHAT_MINI_APP_AES_KEY=
```

这四个参数都需要在微信小程序官方后台获取，地址：https://mp.weixin.qq.com


`WECHAT_MINI_APP_APPID`的获取方式：
登录以上网址以后，鼠标放在左下角微信小程序头像，会出来账号设置的菜单。点击进去。
在`账号信息`的区域会看到AppID(小程序ID)，这个就是上面需要填写的WECHAT_MINI_APP_APPID

`WECHAT_MINI_APP_SECRET`的获取方式：
在左侧点击`管理菜单`，在出现的二级菜内点击`开发管理`。
在右侧`开发者ID`区域内，会看到AppSecret(小程序密钥)。点击重置即可获取。

`WECHAT_MINI_APP_TOKEN` 和 `WECHAT_MINI_APP_AES_KEY` 的获取方式：
这两个参数暂时没用处。可以暂时不需要。之后会有需要，届时也会更新这个文档。



### 获取微信小程序前端资源

通过客服人员获取微信小程序前端资源

解压后可以看到一个`dist`目录

打开微信开发者工具，点击导入微信小程序，选择这个`dist`文件夹，选择不使用云开发。点击导入。

至此，微信小程序的基本工作已经完成。




#### 调试微信小程序

在微信开发者工具的模拟器中，调试测试微信小程序，看看一切是否正常。


### 上传微信小程序

一切没问题以后，点击微信开发者工具顶部的上传按钮，上传微信小程序。



### 提交审核

上传完毕后，在微信小程序后台(https://mp.weixin.qq.com), 左侧`管理`菜单下，点击版本管理菜单。
将开发版本提交审核。

### 等待审核

等待微信官方审核通过。
当然，CRM作为一个团队内部人员使用的应用，你也可以直接在版本管理里，点击体验版二维码，让团队人员使用体验版也可以。
审核通过后，意味着所有人都可以看到这个微信小程序。



### 一些说明

#### 小程序是否需要认证

初次注册的小程序可能需要认证。如果你的小程序曾经认证过，现在过期了。其实认证与否都没关系。可以让团队人员使用体验版二维码。

#### 小程序是否需要备案

不备案，普通用户在微信里面无法搜索到，但还是我上面所说，如果备案对你比较困难，那么人为将微信小程序二维码给团队人员扫码后使用即可，使用一次以后，之后在微信的小程序内就可以看到使用记录。下次可以直接在记录中找到。

#### 微信小程序每次更新都需要更新后端或者前端吗？

不一定。具体得问客服人员。有时候可能只更新了后端，有时候可能只更新了前端，但是大多数时候的更新，前后端都需要更新。